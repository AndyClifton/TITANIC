clear all
close all

%% define root path for functions
if ismac
    %code_path = '/Volumes/Public/Projects/Projects G-S/Met135Analysis/MATLAB source code';
    code_path = '/Users/aclifton/Documents/public/projects/Met135Analysis_Local/';
elseif ispc
    code_path = 'Y:\Wind\Public\Projects\Projects G-S\Met135Analysis\MATLAB source code';
end

%% set paths
cd(code_path)
addpath(genpath(fullfile(code_path,'firstlook')))
rmpath(genpath(fullfile(code_path,'firstlook','.svn')))
addpath(genpath(fullfile(code_path,'helper_files')))
rmpath(genpath(fullfile(code_path,'helper_files','.svn')))
rmpath(genpath(fullfile(code_path,'helper_files','DataToolsTower','Volumes')))

%% define a path for a specific period of time
if ismac
    data_path = '/Volumes/Confidential/Projects/MetData/M4Twr/2013/04';
    log_path = '/Volumes/Confidential/Projects/MetData/M4Twr/QCReports';
elseif ispc
    data_path = 'Y:\Wind\Confidential\Projects\MetData\M4Twr\2012\05';
    log_path = 'Y:\Wind\Confidential\Projects\MetData\M4Twr\QCReports';
end

%log_path = '~/Documents/projects/M4/local_data_for_test';

%% to run today, use
[from_date,to_date,data_path] = MainTowerOperational;

%% M5
[from_date,to_date,data_path] = MainTowerOperational('tower','M5');

%% get the most recent data
all_data = TowerFind10minDataMATLAB('data_root','/Volumes/Confidential/Projects/MetData/M5Twr',...
    'tower','M5',...
    'from_date',datevec(now-7),...
    'to_date',datevec(now));

%% run a selected window
MainTowerOperational(...
    'tower','M4',...
    'from_date',[2014 05 05 0 0 0],...
    'to_date',[2014 05 12 24 0 0],...
    'data_path','Y:/wind/Confidential/Projects/MetData/M4Twr/2014/05',...
    'config_path','Y:/wind/Public/Projects/Projects G-S/Met135Analysis/firstlook',...
    'outage_file','M4_outages.mat',...
    'log_file','M4_log_interactive.txt',...
    'log_path','Y:/wind/Confidential/Projects/MetData/M4Twr/QCReports',...
    'DEBUG',0)

%% try TDMS-capable firstlook.m with normal M5 files
MainTowerOperational(...
    'tower','M5',...
    'from_date',[2014 09 01 0 0 0],...
    'to_date',[2014 09 30 24 0 0],...   
    'data_root','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test/',...
    'data_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test/2014/09',...
    'config_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/firstlook',...
    'config_file','M5_config.mat',...
    'outage_file','M5_outages.mat',...
    'log_file','M5_log_interactive.txt',...
    'log_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test',...
    'web_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test',...
    'DO_MOVE',1);


%% try M5 TDMS files
MainTowerOperational(...
    'tower','M5',...
    'from_date',[2015 01 01 0 0 0],...
    'to_date',[2015 01 15 24 0 0],...   
    'data_root','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test/',...
    'data_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test/2015/01',...
    'config_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/firstlook',...
    'config_file','M5_config_TDMS.mat',...
    'outage_file','M5_outages.mat',...
    'log_file','M5_TDMS_log_interactive.txt',...
    'log_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test',...
    'web_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test',...
    'DO_MOVE',1);

%% try TDMS-capable firstlook.m with normal M4 files
MainTowerOperational(...
    'tower','M4',...
    'from_date',[2014 12 01 0 0 0],...
    'to_date',[2014 12 22 24 0 0],...   
    'data_root','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M4 test/',...
    'data_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M4 test/2014/12',...
    'config_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/firstlook',...
    'config_file','M4_config_2015Jan01.mat',...
    'outage_file','M4_outages.mat',...
    'log_file','M4_log_interactive.txt',...
    'log_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M4 test',...
    'web_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M4 test',...
    'DEBUG',0,...
    'DO_MOVE',1);

%% copy 10 minute data to the web
TowerExportMonthlyData('from_date',[2014 09 01 0 0 0],...
    'to_date',[2014 12 30 24 0 0],...
    'data_location','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test/',...
    'export_path','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test/web')

%% copy 20 Hz data to the web
TowerCopy20HzData('from_date',[2014 09 01 0 0 0],...
    'to_date',[2014 12 30 24 0 0],...
    'data_root','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test/',...
    'output_root','/Users/aclifton/Documents/public/projects/Met135Analysis_Local/M5 TDMS test/web');